-- MySQL dump 10.14  Distrib 5.5.64-MariaDB, for Linux (x86_64)
--
-- Host: localhost    Database: oneline_cloud
-- ------------------------------------------------------
-- Server version	5.5.64-MariaDB

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `flows_templates`
--

DROP TABLE IF EXISTS `flows_templates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `flows_templates` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `flow_json` text COLLATE utf8_unicode_ci,
  `category` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `extra_data` text COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=56 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `flows_templates`
--

LOCK TABLES `flows_templates` WRITE;
/*!40000 ALTER TABLE `flows_templates` DISABLE KEYS */;
INSERT INTO `flows_templates` VALUES (44,'2020-01-22 03:06:59','2020-01-22 03:06:59','Call Forward','A basic example of call forwarding','{\"graph\":{\"cells\":[{\"name\":\"Launch\",\"type\":\"devs.LaunchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[],\"outPorts\":[\"Incoming Call\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"Incoming Call\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Incoming Call\"}}}]},\"position\":{\"x\":469.4,\"y\":120},\"angle\":0,\"id\":\"b199a740-e7c8-409b-86bf-7f5316f2a12f\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Bridge\",\"type\":\"devs.BridgeModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Connected Call Ended\",\"Caller Hung Uo\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Connected Call Ended\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Connected Call Ended\"}}},{\"id\":\"Caller Hung Uo\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Caller Hung Uo\"}}}]},\"position\":{\"x\":465,\"y\":315},\"angle\":0,\"id\":\"ea771941-6db7-4a8e-a2d0-32f195093ac7\",\"z\":3,\"attrs\":{\".label\":{\"text\":\"ForwardBridge\",\"font-size\":\"18\"},\".description\":{\"text\":\"Connect to Your Phone Number\"}}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"b199a740-e7c8-409b-86bf-7f5316f2a12f\",\"port\":\"Incoming Call\"},\"target\":{\"id\":\"ea771941-6db7-4a8e-a2d0-32f195093ac7\",\"port\":\"In\"},\"id\":\"c2000bc1-c67a-4327-bf11-d4410a73898e\",\"z\":4,\"vertices\":[{\"x\":580.2,\"y\":271.5}],\"attrs\":{}}]},\"models\":[{\"id\":\"b199a740-e7c8-409b-86bf-7f5316f2a12f\",\"name\":\"Launch\",\"data\":{},\"links\":[]},{\"id\":\"ea771941-6db7-4a8e-a2d0-32f195093ac7\",\"name\":\"ForwardBridge\",\"data\":{\"call_type\":\"Phone Number\",\"number_to_call\":\"Your Phone Number\",\"timeout\":\"30\",\"caller_id\":\"Your Caller ID\",\"do_record\":true},\"links\":[]}]}','Phone System',''),(45,'2020-01-22 03:06:59','2020-01-22 03:06:59','Simple IVR','A setup for forwarding calls to 3 sections based on user selection','{\"graph\":{\"cells\":[{\"name\":\"Launch\",\"type\":\"devs.LaunchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[],\"outPorts\":[\"Incoming Call\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"Incoming Call\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Incoming Call\"}}}]},\"position\":{\"x\":469.4,\"y\":120},\"angle\":0,\"id\":\"348a1688-90a4-4e2a-a163-58785c3a9217\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Switch\",\"type\":\"devs.SwitchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"No Condition Matches\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"No Condition Matches\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"No Condition Matches\"}}},{\"id\":\"Condition Matches 1\",\"group\":\"out\",\"args\":{},\"label\":{\"position\":{\"name\":\"bottom\",\"args\":{}}},\"attrs\":{\"text\":{\"text\":\"Condition Matches 1\"}}},{\"id\":\"Condition Matches 2\",\"group\":\"out\",\"args\":{},\"label\":{\"position\":{\"name\":\"bottom\",\"args\":{}}},\"attrs\":{\"text\":{\"text\":\"Condition Matches 2\"}}},{\"id\":\"Condition Matches 3\",\"group\":\"out\",\"args\":{},\"label\":{\"position\":{\"name\":\"bottom\",\"args\":{}}},\"attrs\":{\"text\":{\"text\":\"Condition Matches 3\"}}}]},\"position\":{\"x\":465,\"y\":480},\"angle\":0,\"id\":\"4e707c43-79ea-44a1-a30f-033939a7d9d9\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Bridge\",\"type\":\"devs.BridgeModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Connected Call Ended\",\"Caller Hung Uo\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Connected Call Ended\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Connected Call Ended\"}}},{\"id\":\"Caller Hung Uo\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Caller Hung Uo\"}}}]},\"position\":{\"x\":195,\"y\":720},\"angle\":0,\"id\":\"bd9273bf-b43d-4999-8a7f-3ad4ba89f77a\",\"z\":3,\"attrs\":{\".label\":{\"text\":\"SupportBridge\",\"font-size\":\"18\"},\".description\":{\"text\":\"Connect to ext undefined\"}}},{\"name\":\"Bridge\",\"type\":\"devs.BridgeModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Connected Call Ended\",\"Caller Hung Uo\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Connected Call Ended\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Connected Call Ended\"}}},{\"id\":\"Caller Hung Uo\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Caller Hung Uo\"}}}]},\"position\":{\"x\":465,\"y\":720},\"angle\":0,\"id\":\"b16c858b-c2f5-47ed-9f6d-85d7f3690d7e\",\"z\":3,\"attrs\":{\".label\":{\"text\":\"SalesBridge\",\"font-size\":\"18\"},\".description\":{\"text\":\"Connect to ext undefined\"}}},{\"name\":\"Bridge\",\"type\":\"devs.BridgeModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Connected Call Ended\",\"Caller Hung Uo\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Connected Call Ended\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Connected Call Ended\"}}},{\"id\":\"Caller Hung Uo\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Caller Hung Uo\"}}}]},\"position\":{\"x\":735,\"y\":720},\"angle\":0,\"id\":\"1a80cb81-306e-49f7-9b2e-1de9374459f6\",\"z\":3,\"attrs\":{\".label\":{\"text\":\"OperatorBridge\",\"font-size\":\"18\"},\".description\":{\"text\":\"Connect to ext undefined\"}}},{\"name\":\"ProcessInput\",\"type\":\"devs.ProcessInputModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Digits Received\",\"Speech Received\",\"No Input\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Digits Received\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Digits Received\"}}},{\"id\":\"Speech Received\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Speech Received\"}}},{\"id\":\"No Input\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"No Input\"}}}]},\"position\":{\"x\":465,\"y\":300},\"angle\":0,\"id\":\"be605ebe-0eea-4300-ba0e-c81698b3a603\",\"z\":4,\"attrs\":{\".label\":{\"font-size\":\"18\"},\".description\":{\"text\":\"Use text to speech to process input\"}}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"348a1688-90a4-4e2a-a163-58785c3a9217\",\"port\":\"Incoming Call\"},\"target\":{\"id\":\"be605ebe-0eea-4300-ba0e-c81698b3a603\",\"port\":\"In\"},\"id\":\"c4b310a2-f7fa-4c3b-b344-aad76da3de62\",\"z\":5,\"vertices\":[{\"x\":580.2,\"y\":264}],\"attrs\":{}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"be605ebe-0eea-4300-ba0e-c81698b3a603\",\"port\":\"Digits Received\"},\"target\":{\"id\":\"4e707c43-79ea-44a1-a30f-033939a7d9d9\",\"port\":\"In\"},\"id\":\"c2ded1c4-915f-4f17-a4a0-29af41cc17c0\",\"z\":6,\"vertices\":[{\"x\":578,\"y\":444}],\"attrs\":{}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"4e707c43-79ea-44a1-a30f-033939a7d9d9\",\"port\":\"Condition Matches 1\"},\"target\":{\"id\":\"bd9273bf-b43d-4999-8a7f-3ad4ba89f77a\",\"port\":\"In\"},\"connector\":{\"name\":\"rounded\"},\"router\":{\"name\":\"manhattan\"},\"id\":\"3e98c7f2-0f4e-4f9b-b761-e10b88152637\",\"z\":7,\"vertices\":[{\"x\":443,\"y\":654}],\"attrs\":{}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"4e707c43-79ea-44a1-a30f-033939a7d9d9\",\"port\":\"Condition Matches 2\"},\"target\":{\"id\":\"b16c858b-c2f5-47ed-9f6d-85d7f3690d7e\",\"port\":\"In\"},\"connector\":{\"name\":\"rounded\"},\"router\":{\"name\":\"manhattan\"},\"id\":\"d84d7574-daf4-4bb8-a6bd-36c00427df3e\",\"z\":8,\"vertices\":[{\"x\":578,\"y\":654}],\"attrs\":{}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"4e707c43-79ea-44a1-a30f-033939a7d9d9\",\"port\":\"Condition Matches 3\"},\"target\":{\"id\":\"1a80cb81-306e-49f7-9b2e-1de9374459f6\",\"port\":\"In\"},\"connector\":{\"name\":\"rounded\"},\"router\":{\"name\":\"manhattan\"},\"id\":\"b6f4383f-43dc-42ec-9b03-9a22b8c51884\",\"z\":9,\"vertices\":[{\"x\":713,\"y\":654}],\"attrs\":{}}]},\"models\":[{\"id\":\"348a1688-90a4-4e2a-a163-58785c3a9217\",\"name\":\"Launch\",\"data\":{},\"links\":[]},{\"id\":\"be605ebe-0eea-4300-ba0e-c81698b3a603\",\"name\":\"ProcessInput\",\"data\":{\"playback_type\":\"Say\",\"text_to_say\":\"Hello, press 1 for support 2 for sales or 3 to speak to an operator.\",\"text_language\":\"en-US\",\"text_gender\":\"MALE\",\"voice\":\"en-US-Standard-B\",\"number_of_loops\":\"1\",\"stop_timeout\":\"30\",\"max_digits\":\"1\",\"stop_gather_on_keypress\":false},\"links\":[]},{\"id\":\"bd9273bf-b43d-4999-8a7f-3ad4ba89f77a\",\"name\":\"SupportBridge\",\"data\":{\"call_type\":\"Extension\"},\"links\":[]},{\"id\":\"4e707c43-79ea-44a1-a30f-033939a7d9d9\",\"name\":\"Switch\",\"data\":{\"test\":\"ProcessInput.digits\"},\"links\":[{\"to\":null,\"type\":\"LINK_CONDITION_MATCHES\",\"value\":\"1\",\"label\":\"Condition Matches 1\",\"condition\":\"Equals\",\"cell\":\"Bridge\"},{\"to\":null,\"type\":\"LINK_CONDITION_MATCHES\",\"value\":\"2\",\"label\":\"Condition Matches 2\",\"condition\":\"Equals\",\"cell\":\"SalesBridge\"},{\"to\":null,\"type\":\"LINK_CONDITION_MATCHES\",\"value\":\"3\",\"label\":\"Condition Matches 3\",\"condition\":\"Equals\",\"cell\":\"OperatorBridge\"}]},{\"id\":\"b16c858b-c2f5-47ed-9f6d-85d7f3690d7e\",\"name\":\"SalesBridge\",\"data\":{\"call_type\":\"Extension\"},\"links\":[]},{\"id\":\"1a80cb81-306e-49f7-9b2e-1de9374459f6\",\"name\":\"OperatorBridge\",\"data\":{\"call_type\":\"Extension\"},\"links\":[]}]}','Phone System',''),(46,'2020-01-22 03:06:59','2020-01-22 03:06:59','Voicemail Example','Forward calls to voicemail when there is a no answer dial status','{\"graph\":{\"cells\":[{\"name\":\"Launch\",\"type\":\"devs.LaunchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[],\"outPorts\":[\"Incoming Call\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"Incoming Call\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Incoming Call\"}}}]},\"position\":{\"x\":469.4,\"y\":120},\"angle\":0,\"id\":\"d14d4ec8-1864-490f-b992-ac617b551e2b\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Switch\",\"type\":\"devs.SwitchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"No Condition Matches\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"No Condition Matches\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"No Condition Matches\"}}},{\"id\":\"Condition Matches 1\",\"group\":\"out\",\"args\":{},\"label\":{\"position\":{\"name\":\"bottom\",\"args\":{}}},\"attrs\":{\"text\":{\"text\":\"Condition Matches 1\"}}}]},\"position\":{\"x\":450,\"y\":525},\"angle\":0,\"id\":\"4f4dc35d-1fb3-43fc-b079-c968fedd720a\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Bridge\",\"type\":\"devs.BridgeModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Connected Call Ended\",\"Caller Hung Uo\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Connected Call Ended\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Connected Call Ended\"}}},{\"id\":\"Caller Hung Uo\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Caller Hung Uo\"}}}]},\"position\":{\"x\":465,\"y\":330},\"angle\":0,\"id\":\"1d79d70b-a957-474a-9def-9153c4779992\",\"z\":3,\"attrs\":{\".label\":{\"text\":\"ForwardBridge\",\"font-size\":\"18\"},\".description\":{\"text\":\"Connect to Your Number Here\"}}},{\"name\":\"RecordVoicemail\",\"type\":\"devs.RecordVoicemailModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Record Complete\",\"No Audio\",\"Hangup\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Record Complete\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Record Complete\"}}},{\"id\":\"No Audio\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"No Audio\"}}},{\"id\":\"Hangup\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Hangup\"}}}]},\"position\":{\"x\":705,\"y\":720},\"angle\":0,\"id\":\"dc78c72f-1545-47c8-8296-6b84d57ab2ca\",\"z\":5,\"attrs\":{\".label\":{\"font-size\":\"18\"},\".description\":{\"text\":\"Record voicemail for 5 seconds\"}}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"d14d4ec8-1864-490f-b992-ac617b551e2b\",\"port\":\"Incoming Call\"},\"target\":{\"id\":\"1d79d70b-a957-474a-9def-9153c4779992\",\"port\":\"In\"},\"id\":\"fcaa13f6-f7f1-4f4d-babe-22f94d6280ff\",\"z\":6,\"vertices\":[{\"x\":580.2,\"y\":279}],\"attrs\":{}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"1d79d70b-a957-474a-9def-9153c4779992\",\"port\":\"Connected Call Ended\"},\"target\":{\"id\":\"4f4dc35d-1fb3-43fc-b079-c968fedd720a\",\"port\":\"In\"},\"id\":\"27aad693-a418-4260-9a42-186f97b308e6\",\"z\":7,\"vertices\":[{\"x\":570.5,\"y\":481.5}],\"attrs\":{}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"4f4dc35d-1fb3-43fc-b079-c968fedd720a\",\"port\":\"Condition Matches 1\"},\"target\":{\"id\":\"dc78c72f-1545-47c8-8296-6b84d57ab2ca\",\"port\":\"In\"},\"connector\":{\"name\":\"rounded\"},\"router\":{\"name\":\"manhattan\"},\"id\":\"c6d6acef-6fa6-4638-9248-d20858101c40\",\"z\":8,\"vertices\":[{\"x\":690.5,\"y\":676.5}],\"attrs\":{}}]},\"models\":[{\"id\":\"d14d4ec8-1864-490f-b992-ac617b551e2b\",\"name\":\"Launch\",\"data\":{},\"links\":[]},{\"id\":\"dc78c72f-1545-47c8-8296-6b84d57ab2ca\",\"name\":\"RecordVoicemail\",\"data\":{\"max_recording_length\":\"5\",\"finish_key\":\"#\",\"seconds_of_silence\":\"5\"},\"links\":[]},{\"id\":\"1d79d70b-a957-474a-9def-9153c4779992\",\"name\":\"ForwardBridge\",\"data\":{\"call_type\":\"Phone Number\",\"number_to_call\":\"Your Number Here\",\"caller_id\":\"Your Caller ID Here\",\"do_record\":true},\"links\":[]},{\"id\":\"4f4dc35d-1fb3-43fc-b079-c968fedd720a\",\"name\":\"Switch\",\"data\":{\"test\":\"ForwardBridge.dial_status\"},\"links\":[{\"to\":null,\"type\":\"LINK_CONDITION_MATCHES\",\"value\":\"no-answer\",\"label\":\"Condition Matches 1\",\"condition\":\"Equals\",\"cell\":\"RecordVoicemail\"}]}]}','Phone System',''),(47,'2020-01-22 03:06:59','2020-01-22 03:06:59','Queue Example','Forward calls to voicemail when there is a no answer dial status','{\"graph\":{\"cells\":[{\"name\":\"Launch\",\"type\":\"devs.LaunchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[],\"outPorts\":[\"Incoming Call\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"Incoming Call\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Incoming Call\"}}}]},\"position\":{\"x\":469.4,\"y\":120},\"angle\":0,\"id\":\"3358aba5-7087-4b9c-8ab9-d578cb4dd55e\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Bridge\",\"type\":\"devs.BridgeModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Connected Call Ended\",\"Caller Hung Uo\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Connected Call Ended\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Connected Call Ended\"}}},{\"id\":\"Caller Hung Uo\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Caller Hung Uo\"}}}]},\"position\":{\"x\":465,\"y\":360},\"angle\":0,\"id\":\"a03b8b6b-b2a6-42ff-8d70-afc19c2923bd\",\"z\":3,\"attrs\":{\".label\":{\"text\":\"SupportQueue\",\"font-size\":\"18\"}}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"3358aba5-7087-4b9c-8ab9-d578cb4dd55e\",\"port\":\"Incoming Call\"},\"target\":{\"id\":\"a03b8b6b-b2a6-42ff-8d70-afc19c2923bd\",\"port\":\"In\"},\"id\":\"27e74220-84be-4d94-b931-7d6b76c6eb85\",\"z\":4,\"vertices\":[{\"x\":580.2,\"y\":294}],\"attrs\":{}}]},\"models\":[{\"id\":\"3358aba5-7087-4b9c-8ab9-d578cb4dd55e\",\"name\":\"Launch\",\"data\":{},\"links\":[]},{\"id\":\"a03b8b6b-b2a6-42ff-8d70-afc19c2923bd\",\"name\":\"SupportQueue\",\"data\":{\"call_type\":\"Queue\",\"timeout\":\"Main\",\"max_wait_time\":\"60\",\"max_extension_timeout\":\"30\"},\"links\":[]}]}','Phone System',''),(48,'2020-01-22 03:07:00','2020-01-22 03:07:00','Cold Transfer','transfer calls to another extension','{\"graph\":{\"cells\":[{\"name\":\"Launch\",\"type\":\"devs.LaunchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[],\"outPorts\":[\"Incoming Call\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"Incoming Call\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Incoming Call\"}}}]},\"position\":{\"x\":469.4,\"y\":120},\"angle\":0,\"id\":\"49097c0c-893d-4940-a292-1fd6d3579040\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Macro\",\"type\":\"devs.MacroModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Completed\",\"Error\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Completed\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Completed\"}}},{\"id\":\"Error\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Error\"}}}]},\"position\":{\"x\":465,\"y\":315},\"angle\":0,\"id\":\"4310ed91-e278-45d9-bb83-da6db32160a3\",\"z\":7,\"attrs\":{\".label\":{\"text\":\"ColdTransferMacro\",\"font-size\":\"18\"}}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"49097c0c-893d-4940-a292-1fd6d3579040\",\"port\":\"Incoming Call\"},\"target\":{\"id\":\"4310ed91-e278-45d9-bb83-da6db32160a3\",\"port\":\"In\"},\"id\":\"1b437473-8bb4-41a4-a876-ce6c0306183a\",\"z\":8,\"vertices\":[{\"x\":580.2,\"y\":271.5}],\"attrs\":{}}]},\"models\":[{\"id\":\"49097c0c-893d-4940-a292-1fd6d3579040\",\"name\":\"Launch\",\"data\":{},\"links\":[]},{\"id\":\"4310ed91-e278-45d9-bb83-da6db32160a3\",\"name\":\"ColdTransferMacro\",\"data\":{\"function\":\"cold-transfer\",\"params\":[]},\"links\":[]}]}','Extension Codes','{\"create\":[{\"class\":\"MacroFunction\",\"args\":{\"code\":\"module.exports = function(event: LineEvent, context: LineContext) {\\n    return new Promise(async function(resolve, reject) {\\n        var sdk = context.getSDK();\\n        var channel = context.lineChannel;\\n        var flow = context.lineFlow;\\n \\n        await channel.playTTS(\\\"Please enter the extension you want to transfer to\\\");\\n        let exten = await channel.startAcceptingInput(3);\\n        var origBridge = channel.getBridge();\\n        var transferBridge = await sdk.createBridge();\\n        var call = await sdk.createCall(flow, exten, event[\'callerId\'], \'Extension\');\\n        call.on(\\\"Started\\\", async function() {\\n            var allChannels = origBridge.channels;\\n            var filtered = allChannels.filter(function(targetChannel) {\\n                if ( targetChannel.channel.id !== channel.channel.id ) {\\n                    return true;\\n                }\\n                return false;\\n            });\\n            if (filtered.length <= 0) {\\n                reject(\\\"Other channel was not found cannot do call transfer..\\\");\\n                return;\\n            }\\n            await transferBridge.addChannel(call.lineChannel);\\n            var otherChannel = filtered[0];\\n            otherChannel.automateCallHangup = false;\\n            await otherChannel.removeFromBridge();\\n            await transferBridge.addChannel(otherChannel);\\n            await origBridge.playTTS(\\\"Your call has been transfered\\\");\\n            await channel.removeFromBridge();\\n            await channel.hangup();\\n        });\\n    });\\n}\",\"compiled_code\":\"var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nmodule.exports = function (event, context) {\\n    return new Promise(function (resolve, reject) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var sdk, channel, flow, exten, origBridge, transferBridge, call;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        sdk = context.getSDK();\\n                        channel = context.lineChannel;\\n                        flow = context.lineFlow;\\n                        return [4 \\/*yield*\\/, channel.playTTS(\\\"Please enter the extension you want to transfer to\\\")];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 \\/*yield*\\/, channel.startAcceptingInput(3)];\\n                    case 2:\\n                        exten = _a.sent();\\n                        origBridge = channel.getBridge();\\n                        return [4 \\/*yield*\\/, sdk.createBridge()];\\n                    case 3:\\n                        transferBridge = _a.sent();\\n                        return [4 \\/*yield*\\/, sdk.createCall(flow, exten, event[\'callerId\'], \'Extension\')];\\n                    case 4:\\n                        call = _a.sent();\\n                        call.on(\\\"Started\\\", function () {\\n                            return __awaiter(this, void 0, void 0, function () {\\n                                var allChannels, filtered, otherChannel;\\n                                return __generator(this, function (_a) {\\n                                    switch (_a.label) {\\n                                        case 0:\\n                                            allChannels = origBridge.channels;\\n                                            filtered = allChannels.filter(function (targetChannel) {\\n                                                if (targetChannel.channel.id !== channel.channel.id) {\\n                                                    return true;\\n                                                }\\n                                                return false;\\n                                            });\\n                                            if (filtered.length <= 0) {\\n                                                reject(\\\"Other channel was not found cannot do call transfer..\\\");\\n                                                return [2 \\/*return*\\/];\\n                                            }\\n                                            return [4 \\/*yield*\\/, transferBridge.addChannel(call.lineChannel)];\\n                                        case 1:\\n                                            _a.sent();\\n                                            otherChannel = filtered[0];\\n                                            otherChannel.automateCallHangup = false;\\n                                            return [4 \\/*yield*\\/, otherChannel.removeFromBridge()];\\n                                        case 2:\\n                                            _a.sent();\\n                                            return [4 \\/*yield*\\/, transferBridge.addChannel(otherChannel)];\\n                                        case 3:\\n                                            _a.sent();\\n                                            return [4 \\/*yield*\\/, origBridge.playTTS(\\\"Your call has been transfered\\\")];\\n                                        case 4:\\n                                            _a.sent();\\n                                            return [4 \\/*yield*\\/, channel.removeFromBridge()];\\n                                        case 5:\\n                                            _a.sent();\\n                                            return [4 \\/*yield*\\/, channel.hangup()];\\n                                        case 6:\\n                                            _a.sent();\\n                                            return [2 \\/*return*\\/];\\n                                    }\\n                                });\\n                            });\\n                        });\\n                        return [2 \\/*return*\\/];\\n                }\\n            });\\n        });\\n    });\\n};\",\"title\":\"cold-transfer\"}}]}'),(55,'2020-01-28 04:03:41','2020-01-28 04:03:41','Check Voicemail','check for voicemail','{\"graph\":{\"cells\":[{\"name\":\"Launch\",\"type\":\"devs.LaunchModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[],\"outPorts\":[\"Incoming Call\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"Incoming Call\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Incoming Call\"}}}]},\"position\":{\"x\":537.665,\"y\":120},\"angle\":0,\"id\":\"5ea5cfd3-d6ce-4c40-9834-38d0ba060b84\",\"z\":1,\"attrs\":{\".label\":{\"font-size\":\"18\"}}},{\"name\":\"Macro\",\"type\":\"devs.MacroModel\",\"size\":{\"width\":226,\"height\":108},\"inPorts\":[\"In\"],\"outPorts\":[\"Completed\",\"Error\"],\"ports\":{\"groups\":{\"in\":{\"position\":\"top\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}},\"out\":{\"position\":\"bottom\",\"label\":{\"position\":\"outside\"},\"attrs\":{\".port-body\":{\"stroke\":\"#CCCCCC\",\"fill\":\"#fff\",\"r\":10,\"magnet\":true},\".port-label\":{\"fill\":\"#000\"}}}},\"items\":[{\"id\":\"In\",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\"In\"}}},{\"id\":\"Completed\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Completed\"}}},{\"id\":\"Error\",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"Error\"}}}]},\"position\":{\"x\":525,\"y\":315},\"angle\":0,\"id\":\"7c691db1-8f7c-4908-bd1b-20b741d76617\",\"z\":7,\"attrs\":{\".label\":{\"text\":\"CheckVoicemailMacro\",\"font-size\":\"18\"}}},{\"type\":\"devs.FlowLink\",\"source\":{\"id\":\"5ea5cfd3-d6ce-4c40-9834-38d0ba060b84\",\"port\":\"Incoming Call\"},\"target\":{\"id\":\"7c691db1-8f7c-4908-bd1b-20b741d76617\",\"port\":\"In\"},\"id\":\"1669e846-5539-4c30-b0a5-b31bd381b9ee\",\"z\":8,\"vertices\":[{\"x\":644.3325,\"y\":271.5}],\"attrs\":{}}]},\"models\":[{\"id\":\"5ea5cfd3-d6ce-4c40-9834-38d0ba060b84\",\"name\":\"Launch\",\"data\":{},\"links\":[]},{\"id\":\"7c691db1-8f7c-4908-bd1b-20b741d76617\",\"name\":\"CheckVoicemailMacro\",\"data\":{\"params\":[{\"name\":\"extension\",\"value\":\"{{Launch.call.from}}\",\"$$hashKey\":\"object:459\"}],\"function\":\"check-voicemail\"},\"links\":[]}]}','Extension Codes','{\"create\":[{\"class\":\"MacroFunction\",\"args\":{\"code\":\"async function playbackMessage(flow: LineFlow, channel: LineChannel, sdk: LineSDK, results: LineListResource < LineRecording > , recIndex: number) {\\n\\n    console.log(\\\"playbackMessage called\\\");\\n    if (recIndex === results.data.length) {\\n        \\/\\/ no more new messages\\n        return;\\n    }\\n    var recording = results.data[recIndex];\\n    console.log(\\\"calling playRecording on URL: \\\" + recording.info.public_url);\\n    await sdk.playRecording(flow, channel, recording.info.public_url);\\n    console.log(\\\"calling playRecording\\\");\\n    await recording.removeRecordingTag(\\\"unheard\\\");\\n    let prompt = `To delete this message press 1. to go to the next message press 2`;\\n    let input = await channel.startAcceptingInput(5);\\n    if (input === \\\"1\\\") {\\n        await recording.deleteRecording();\\n        recIndex = recIndex + 1;\\n        playbackMessage(flow, channel, sdk, results, recIndex);\\n    } else if (input === \\\"2\\\") {\\n        recIndex = recIndex + 1;\\n        playbackMessage(flow, channel, sdk, results, recIndex);\\n    }\\n}\\n\\nasync function startAcceptingInput(sdk: LineSDK, flow: LineFlow, results: LineListResource < LineRecording > , channel: LineChannel) {\\n\\n\\n    return new Promise(async function (resolve, reject) {\\n        var text = `You have ${results.data.length} new messages to hear your unheard messages hit 1. to exit voicemail press *`;\\n        console.log(\\\"calling playTTS\\\");\\n        await channel.playTTS(flow, text);\\n        console.log(\\\"calling startAcceptingInput\\\");\\n        let input = await channel.startAcceptingInput(5);\\n        console.log(`user pressed ${input}`);\\n        if (input === \\\"1\\\") {\\n            await playbackMessage(flow, channel, sdk, results, 0);\\n        } else if (input === \\\"*\\\") {\\n            channel.hangup();\\n        } else {\\n            await channel.playTTS(flow, \\\"sorry i could not understand that. please try again\\\");\\n            await startAcceptingInput(sdk, flow, results, channel);\\n        }\\n    });\\n}\\nmodule.exports = function (event: LineEvent, context: LineContext) {\\n    return new Promise(async function (resolve, reject) {\\n        var sdk = context.getSDK();\\n        var flow = context.flow;\\n        var channel = context.channel;\\n        var session = await sdk.createSession(context.workspace.api_token, context.workspace.api_secret);\\n        var results = await session.listRecordings(\\\"unheard\\\");\\n        await startAcceptingInput(sdk, flow, results, channel);\\n    });\\n}\",\"compiled_code\":\"var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nfunction playbackMessage(flow, channel, sdk, results, recIndex) {\\n    return __awaiter(this, void 0, void 0, function () {\\n        var recording, prompt, input;\\n        return __generator(this, function (_a) {\\n            switch (_a.label) {\\n                case 0:\\n                    console.log(\\\"playbackMessage called\\\");\\n                    if (recIndex === results.data.length) {\\n                        \\/\\/ no more new messages\\n                        return [2 \\/*return*\\/];\\n                    }\\n                    recording = results.data[recIndex];\\n                    console.log(\\\"calling playRecording on URL: \\\" + recording.info.public_url);\\n                    return [4 \\/*yield*\\/, sdk.playRecording(flow, channel, recording.info.public_url)];\\n                case 1:\\n                    _a.sent();\\n                    console.log(\\\"calling playRecording\\\");\\n                    return [4 \\/*yield*\\/, recording.removeRecordingTag(\\\"unheard\\\")];\\n                case 2:\\n                    _a.sent();\\n                    prompt = \\\"To delete this message press 1. to go to the next message press 2\\\";\\n                    return [4 \\/*yield*\\/, channel.startAcceptingInput(5)];\\n                case 3:\\n                    input = _a.sent();\\n                    if (!(input === \\\"1\\\")) return [3 \\/*break*\\/, 5];\\n                    return [4 \\/*yield*\\/, recording.deleteRecording()];\\n                case 4:\\n                    _a.sent();\\n                    recIndex = recIndex + 1;\\n                    playbackMessage(flow, channel, sdk, results, recIndex);\\n                    return [3 \\/*break*\\/, 6];\\n                case 5:\\n                    if (input === \\\"2\\\") {\\n                        recIndex = recIndex + 1;\\n                        playbackMessage(flow, channel, sdk, results, recIndex);\\n                    }\\n                    _a.label = 6;\\n                case 6: return [2 \\/*return*\\/];\\n            }\\n        });\\n    });\\n}\\nfunction startAcceptingInput(sdk, flow, results, channel) {\\n    return __awaiter(this, void 0, void 0, function () {\\n        return __generator(this, function (_a) {\\n            return [2 \\/*return*\\/, new Promise(function (resolve, reject) {\\n                    return __awaiter(this, void 0, void 0, function () {\\n                        var text, input;\\n                        return __generator(this, function (_a) {\\n                            switch (_a.label) {\\n                                case 0:\\n                                    text = \\\"You have \\\" + results.data.length + \\\" new messages to hear your unheard messages hit 1. to exit voicemail press *\\\";\\n                                    console.log(\\\"calling playTTS\\\");\\n                                    return [4 \\/*yield*\\/, channel.playTTS(flow, text)];\\n                                case 1:\\n                                    _a.sent();\\n                                    console.log(\\\"calling startAcceptingInput\\\");\\n                                    return [4 \\/*yield*\\/, channel.startAcceptingInput(5)];\\n                                case 2:\\n                                    input = _a.sent();\\n                                    console.log(\\\"user pressed \\\" + input);\\n                                    if (!(input === \\\"1\\\")) return [3 \\/*break*\\/, 4];\\n                                    return [4 \\/*yield*\\/, playbackMessage(flow, channel, sdk, results, 0)];\\n                                case 3:\\n                                    _a.sent();\\n                                    return [3 \\/*break*\\/, 8];\\n                                case 4:\\n                                    if (!(input === \\\"*\\\")) return [3 \\/*break*\\/, 5];\\n                                    channel.hangup();\\n                                    return [3 \\/*break*\\/, 8];\\n                                case 5: return [4 \\/*yield*\\/, channel.playTTS(flow, \\\"sorry i could not understand that. please try again\\\")];\\n                                case 6:\\n                                    _a.sent();\\n                                    return [4 \\/*yield*\\/, startAcceptingInput(sdk, flow, results, channel)];\\n                                case 7:\\n                                    _a.sent();\\n                                    _a.label = 8;\\n                                case 8: return [2 \\/*return*\\/];\\n                            }\\n                        });\\n                    });\\n                })];\\n        });\\n    });\\n}\\nmodule.exports = function (event, context) {\\n    return new Promise(function (resolve, reject) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var sdk, flow, channel, session, results;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        sdk = context.getSDK();\\n                        flow = context.flow;\\n                        channel = context.channel;\\n                        return [4 \\/*yield*\\/, sdk.createSession(context.workspace.api_token, context.workspace.api_secret)];\\n                    case 1:\\n                        session = _a.sent();\\n                        return [4 \\/*yield*\\/, session.listRecordings(\\\"unheard\\\")];\\n                    case 2:\\n                        results = _a.sent();\\n                        return [4 \\/*yield*\\/, startAcceptingInput(sdk, flow, results, channel)];\\n                    case 3:\\n                        _a.sent();\\n                        return [2 \\/*return*\\/];\\n                }\\n            });\\n        });\\n    });\\n};\",\"title\":\"check-voicemail\"}}]}');
/*!40000 ALTER TABLE `flows_templates` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2020-01-28  4:07:31
